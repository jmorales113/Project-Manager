(()=>{"use strict";class t{constructor(t,e,s,r){this.templateEl=document.getElementById(t),this.appendEl=document.getElementById(e);const i=document.importNode(this.templateEl.content,!0);this.sectionEl=i.firstElementChild,r&&(this.sectionEl.id=r),this.renderProjectList(s)}renderProjectList(t){this.appendEl.insertAdjacentElement(t?"afterbegin":"beforeend",this.sectionEl)}}const e=(t,e,s)=>{const r=s.value;return{configurable:!0,get(){return r.bind(this)}}};var s;!function(t){t[t.Active=0]="Active",t[t.Finished=1]="Finished"}(s||(s={}));class r{constructor(t,e,s,r,i){this.id=t,this.title=e,this.description=s,this.people=r,this.status=i}}class i extends class{constructor(){this.listeners=[]}addListener(t){this.listeners.push(t)}}{constructor(){super(),this.projects=[]}static getInstance(){return this.instance||(this.instance=new i),this.instance}addProject(t,e,i){const n=new r(Math.random().toString(),t,e,i,s.Active);this.projects.push(n),this.updateListeners()}moveProject(t,e){const s=this.projects.find((e=>e.id===t));s&&s.status!==e&&(s.status=e,this.updateListeners())}updateListeners(){for(const t of this.listeners)t(this.projects.slice())}}const n=i.getInstance();class o extends t{constructor(){super("project-input","app",!0,"user-input"),this.titleInputEl=this.sectionEl.querySelector("#title"),this.descriptionInputEl=this.sectionEl.querySelector("#description"),this.peopleInputEl=this.sectionEl.querySelector("#people"),this.renderList()}renderList(){this.sectionEl.addEventListener("submit",this.submitForm)}renderSection(){}userInput(){const t=this.titleInputEl.value,e=this.descriptionInputEl.value,s=this.peopleInputEl.value;return 0===t.trim().length||0===e.trim().length||0===s.trim().length?void alert("Invalid input, please try again!"):[t,e,+s]}wipeInputFields(){this.titleInputEl.value="",this.descriptionInputEl.value="",this.peopleInputEl.value=""}submitForm(t){t.preventDefault();const e=this.userInput();if(Array.isArray(e)){const[t,s,r]=e;n.addProject(t,s,r),this.wipeInputFields()}}}!function(t,e,s,r){var i,n=arguments.length,o=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(o=(n<3?i(o):n>3?i(e,s,o):i(e,s))||o);n>3&&o&&Object.defineProperty(e,s,o)}([e],o.prototype,"submitForm",null);class c extends t{constructor(t,e){super("single-project",t,!1,e.id),this.project=e,this.renderList(),this.renderSection()}get members(){return 1===this.project.people?"1 member":`${this.project.people} members`}dragStart(t){t.dataTransfer.setData("text/plain",this.project.id),t.dataTransfer.effectAllowed="move"}dragEnd(t){console.log("DragEnd")}renderList(){this.sectionEl.addEventListener("dragstart",this.dragStart),this.sectionEl.addEventListener("dragend",this.dragEnd)}renderSection(){this.sectionEl.querySelector("h2").textContent=this.project.title,this.sectionEl.querySelector("h3").textContent=this.members,this.sectionEl.querySelector("p").textContent=this.project.description}}!function(t,e,s,r){var i,n=arguments.length,o=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(o=(n<3?i(o):n>3?i(e,s,o):i(e,s))||o);n>3&&o&&Object.defineProperty(e,s,o)}([e],c.prototype,"dragStart",null);var l=function(t,e,s,r){var i,n=arguments.length,o=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(o=(n<3?i(o):n>3?i(e,s,o):i(e,s))||o);return n>3&&o&&Object.defineProperty(e,s,o),o};class d extends t{constructor(t){super("project-list","app",!1,`${t}-projects`),this.type=t,this.assignedProjects=[],this.renderList(),this.renderSection()}dragOver(t){t.dataTransfer&&"text/plain"===t.dataTransfer.types[0]&&(t.preventDefault(),this.sectionEl.querySelector("ul").classList.add("drop"))}drop(t){const e=t.dataTransfer.getData("text/plain");n.moveProject(e,"Active"===this.type?s.Active:s.Finished)}dragLeave(t){this.sectionEl.querySelector("ul").classList.remove("drop")}renderList(){this.sectionEl.addEventListener("dragover",this.dragOver),this.sectionEl.addEventListener("dragleave",this.dragLeave),this.sectionEl.addEventListener("drop",this.drop),n.addListener((t=>{const e=t.filter((t=>"Active"===this.type?t.status===s.Active:t.status===s.Finished));this.assignedProjects=e,this.renderProjects()}))}renderSection(){const t=`${this.type}-projects-list`;this.sectionEl.querySelector("ul").id=t,this.sectionEl.querySelector("h2").textContent=`${this.type} Projects`}renderProjects(){document.getElementById(`${this.type}-projects-list`).innerHTML="";for(const t of this.assignedProjects)new c(this.sectionEl.querySelector("ul").id,t)}}l([e],d.prototype,"dragOver",null),l([e],d.prototype,"drop",null),l([e],d.prototype,"dragLeave",null),new o,new d("Active"),new d("Finished")})();